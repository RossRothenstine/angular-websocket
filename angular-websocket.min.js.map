{"version":3,"sources":["src\\angular-websocket.js"],"names":["$WebSocketProvider","$rootScope","$q","$timeout","$websocketBackend","$WebSocket","url","protocols","options","isObject","isArray","undefined","this","ssl","test","scope","rootScopeFailover","useApplyAsync","initialTimeout","maxTimeout","reconnectIfNotNormalClose","isBinary","binary","binaryType","_reconnectAttempts","sendQueue","onOpenCallbacks","onMessageCallbacks","onErrorCallbacks","onCloseCallbacks","objectFreeze","_readyStateConstants","_connect","_setInternalState","prototype","CONNECTING","OPEN","CLOSING","CLOSED","RECONNECT_ABORTED","_normalCloseCode","_reconnectableStatusCodes","safeDigest","autoApply","$$phase","$digest","bindToScope","self","$on","force","socket","readyState","create","onmessage","angular","bind","_onMessageHandler","onopen","_onOpenHandler","onerror","_onErrorHandler","onclose","_onCloseHandler","fireQueue","length","data","shift","send","isString","message","JSON","stringify","deferred","resolve","notifyOpenCallbacks","event","i","call","notifyCloseCallbacks","notifyErrorCallbacks","onOpen","cb","push","onClose","onError","onMessage","callback","isFunction","Error","isDefined","filter","RegExp","fn","pattern","code","indexOf","reconnect","applyAsyncOrDigest","args","arraySlice","arguments","$applyAsync","apply","currentCallback","exec","close","bufferedAmount","cancelableify","promise","cancel","then","newPromise","reason","splice","reject","defer","isMocked","isConnected","mockSend","backoffDelay","_getBackoffDelay","backoffDelaySeconds","console","log","attempt","R","Math","random","T","F","N","M","floor","min","pow","state","objectDefineProperty","_internalConnectionState","forEach","pending","get","set","$WebSocketBackendProvider","$window","$log","Socket","ws","match","exports","require","Client","client","e","WebSocket","MozWebSocket","createWebSocketBackend","warn","noop","Object","freeze","defineProperty","Array","slice","elt","len","from","Number","ceil","module","factory","service","define"],"mappings":"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"}